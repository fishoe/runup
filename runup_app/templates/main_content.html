{% extends 'layout.html'%} {% load static %} {% block style%}
<link rel="stylesheet" type="text/css" href="{% static 'recommendapp/index.css' %}" />
<link rel="stylesheet" type="text/css" media="(max-width: 480px)" href="{% static 'recommendapp/mobile_index.css' %}" />
{% endblock %} {% block content %} {% comment %} {{category}} {% endcomment %}
<div class="infinite-container">
  {% for prod in contents %}
  <div class="infinite-item">
    <div class="box">
      <div class="img_box">
        <a onclick="animation('{% url 'product' prod.id %}')">
          <img src="{{ prod.Img_url }}" alt="image" class="image" />
        </a>
      </div>
      <div class="info">
        <b>{{ prod.Brand.Name_en }}</b>
        <div class="price">{% load humanize %} {{prod.Origin_price|intcomma}}원</div>
      </div>
    </div>
  </div>
  {% endfor %}
</div>

<script type="text/javascript">
  function animation(targetUrl) {
    var maskHeight = $(document).height();
    var windowHeight = $(window).height();
    var maskWidth = $(document).width();
    var height = $(document).scrollTop();

    var mask = "<div id='mask' style='position:absolute; z-index:9000; background-color:#000000; display:none; left:0; top:0;'></div>";
    var loadingImg = '';
    var delayTimeMillis = 1200;

    loadingImg += "<div id='loadingImg' style='position:absolute; left:15%; display:none; z-index:10000;'>";
    loadingImg += " <img src='https://mir-s3-cdn-cf.behance.net/project_modules/disp/35771931234507.564a1d2403b3a.gif'/>";
    loadingImg += '</div>';

    $('form').append(mask).append(loadingImg);

    $('#mask').css({
      width: maskWidth,
      height: maskHeight,
      opacity: '0.4',
    });

    $('#mask').show();

    if (height == 0) {
      $('#loadingImg').css({
        top: windowHeight / 3,
      });
    } else {
      $('#loadingImg').css({
        top: height + windowHeight / 3,
      });
    }

    $('#loadingImg').show();

    // 실행 지연
    setTimeout(function () {
      location.href = targetUrl;
    }, delayTimeMillis);
  }
</script>

{% endblock %}

{% block categories %}
<p>hello boys</p>

{% for i in main_ctgs %}
  <p>{{ i.Name_kr }}</p>
  <ol>
  {% for j in sub_ctgs %}
    {% if j.Main.pk == i.pk %}
      <li>{{ j.Name_kr }}</li>
    {% endif %}
  {% endfor %}
  </ol>
{% endfor %}

{% endblock %}